<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crosswalks and Handling of NAICS Sector Codes â€¢ naicsmatch</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Crosswalks and Handling of NAICS Sector Codes">
<meta property="og:description" content="This package provides functions and data objects to 
    assist with validation and conversion of NAICS sector codes. 
    The North American Industrial Classification System (NAICS) is used
    by U.S. government agencies to classify business activities. At five-
    year intervals the sector classifications are updated and concordances
    provided. This package provides convenience functions to these government-
    provided data.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">naicsmatch</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Time-series-translations-from-NAICS-based-rollups.html">Time series translations from NAICS-based rollups</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jameelalsalam/naicsmatch">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="naicsmatch" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#naicsmatch" class="anchor"></a>naicsmatch</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of naicsmatch is to provide functions and crosswalks from and between NAICS sector codes</p>
<p>The North American Industry Classification system is the standard used by Federal statistical agencies in classifying businesses for the purposes of data collection, analysis, and publishing statistical data. <a href="https://www.census.gov/eos/www/naics/index.html">see here</a></p>
<p>The NAICS code classification system is regularly updated, and so translating between different iterations can be necessary to do comparisons between different data sources. This package provides some functions to automate some of these translations using concordances downloaded from the U.S. Census and other agencies and data sources.</p>
<p>References:</p>
<ul>
<li><p><a href="https://www.census.gov/eos/www/naics/concordances/concordances.html">NAICS Concordances</a></p></li>
<li><p><a href="https://www.census.gov/eos/www/naics/2017NAICS/2017_NAICS_Manual.pdf">2017 NAICS Manual</a></p></li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"jameelalsalam/naicsmatch"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This package provides concordances between different vintages of NAICS codes, and functions to facilitate converting data from one NAICS categorization to another.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; -- Attaching packages ---------------------------- tidyverse 1.2.1 --</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; v ggplot2 3.2.1     v purrr   0.3.3</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; v tibble  2.1.3     v dplyr   0.8.3</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; v tidyr   1.0.0     v stringr 1.4.0</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; v readr   1.3.1     v forcats 0.4.0</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; -- Conflicts ------------------------------- tidyverse_conflicts() --</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; x dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(naicsmatch)</a>
<a class="sourceLine" id="cb2-11" title="11"></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(ex_asm09<span class="op">$</span>vos09)</a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt; [1] 313666846</span></a>
<a class="sourceLine" id="cb2-14" title="14"></a>
<a class="sourceLine" id="cb2-15" title="15">ex_asm09</a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; # A tibble: 25 x 4</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt;    naics_2007 naics_label_2007                          year    vos09</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;                                    &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">#&gt;  1 3118       Bakeries and tortilla manufacturing       2009 59448681</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">#&gt;  2 31181      Bread and bakery product manufacturing    2009 35606371</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co">#&gt;  3 31181M     Bread and bakery product manufacturing    2009 35606371</span></a>
<a class="sourceLine" id="cb2-22" title="22"><span class="co">#&gt;  4 31182      Cookie, cracker, and pasta manufacturing  2009 20684887</span></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="co">#&gt;  5 31182M     Cookie, cracker, and pasta manufacturing  2009 20684887</span></a>
<a class="sourceLine" id="cb2-24" title="24"><span class="co">#&gt;  6 31183      Tortilla manufacturing                    2009  3157424</span></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="co">#&gt;  7 311830     Tortilla manufacturing                    2009  3157424</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="co">#&gt;  8 33211      Forging and stamping                      2009 26125051</span></a>
<a class="sourceLine" id="cb2-27" title="27"><span class="co">#&gt;  9 332114     Custom roll forming                       2009  5971708</span></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="co">#&gt; 10 332117     Powder metallurgy parts manufacturing     2009  1322872</span></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="co">#&gt; # ... with 15 more rows</span></a>
<a class="sourceLine" id="cb2-30" title="30"><span class="co">## basic example code</span></a></code></pre></div>
<p>A sample of data from the 2009 Annual Survey of Manufacturers is included as <code>ex_asm09</code>. This data was collected and published using the 2007 NAICS classification codes.</p>
<p>The included data set <code>naics_2007_2012</code> is a concordance between the 2007 and 2012 classifications:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">naics_<span class="dv">2007</span>_<span class="dv">2012</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; # A tibble: 1,184 x 2</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt;    naics_2007 naics_2012</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt;  1 111110     111110    </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;  2 111120     111120    </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;  3 111130     111130    </span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;  4 111140     111140    </span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;  5 111150     111150    </span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;  6 111160     111160    </span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt;  7 111191     111191    </span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt;  8 111199     111199    </span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt;  9 111211     111211    </span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; 10 111219     111219    </span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; # ... with 1,174 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">asm09_<span class="dv">2012</span> &lt;-<span class="st"> </span>ex_asm09 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(naics_<span class="dv">2007</span>_<span class="dv">2012</span>, <span class="dt">by =</span> <span class="st">"naics_2007"</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(asm09_<span class="dv">2012</span><span class="op">$</span>vos09)</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; [1] 313666846</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6">asm09_<span class="dv">2012</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; # A tibble: 25 x 5</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt;    naics_2007 naics_label_2007                      year   vos09 naics_2012</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;                                &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt;  1 3118       Bakeries and tortilla manufacturing   2009  5.94e7 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt;  2 31181      Bread and bakery product manufactur~  2009  3.56e7 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt;  3 31181M     Bread and bakery product manufactur~  2009  3.56e7 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt;  4 31182      Cookie, cracker, and pasta manufact~  2009  2.07e7 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt;  5 31182M     Cookie, cracker, and pasta manufact~  2009  2.07e7 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt;  6 31183      Tortilla manufacturing                2009  3.16e6 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt;  7 311830     Tortilla manufacturing                2009  3.16e6 311830    </span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt;  8 33211      Forging and stamping                  2009  2.61e7 &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt;  9 332114     Custom roll forming                   2009  5.97e6 332114    </span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt; 10 332117     Powder metallurgy parts manufacturi~  2009  1.32e6 332117    </span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">#&gt; # ... with 15 more rows</span></a></code></pre></div>
</div>
</div>
<div id="weighting-by-1--n" class="section level1">
<h1 class="hasAnchor">
<a href="#weighting-by-1--n" class="anchor"></a>Weighting by 1 / N</h1>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">naics_<span class="dv">2007</span>_<span class="dv">2012</span>_wgt &lt;-<span class="st"> </span>naics_<span class="dv">2007</span>_<span class="dv">2012</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(naics_<span class="dv">2007</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">wgt =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="kw">n</span>())</a>
<a class="sourceLine" id="cb5-4" title="4"></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(naics_<span class="dv">2007</span>_<span class="dv">2012</span>_wgt, wgt <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt;   naics_2007   wgt</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; 1 221119       0.2</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; 2 238190       0.5</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; 3 238330       0.5</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; 4 334119       0.5</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; 5 423620       0.5</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; 6 423720       0.5</span></a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">asm09_<span class="dv">2012</span>_v2 &lt;-<span class="st"> </span>asm09_<span class="dv">2012</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">left_join</span>(naics_<span class="dv">2007</span>_<span class="dv">2012</span>_wgt, </a>
<a class="sourceLine" id="cb6-3" title="3">            <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"naics_2007"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vos09 =</span> vos09 <span class="op">*</span><span class="st"> </span>wgt)</a>
<a class="sourceLine" id="cb6-5" title="5"></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(asm09_<span class="dv">2012</span>_v2<span class="op">$</span>vos09)</a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9">asm09_<span class="dv">2012</span>_v2</a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt; # A tibble: 25 x 6</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt;    naics_2007 naics_label_2007                year   vos09 naics_2012   wgt</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;                          &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt;  1 3118       Bakeries and tortilla manufac~  2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt;  2 31181      Bread and bakery product manu~  2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt;  3 31181M     Bread and bakery product manu~  2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">#&gt;  4 31182      Cookie, cracker, and pasta ma~  2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">#&gt;  5 31182M     Cookie, cracker, and pasta ma~  2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">#&gt;  6 31183      Tortilla manufacturing          2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">#&gt;  7 311830     Tortilla manufacturing          2009 3157424 311830         1</span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">#&gt;  8 33211      Forging and stamping            2009      NA &lt;NA&gt;          NA</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">#&gt;  9 332114     Custom roll forming             2009 5971708 332114         1</span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">#&gt; 10 332117     Powder metallurgy parts manuf~  2009 1322872 332117         1</span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co">#&gt; # ... with 15 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">asm09_<span class="dv">2012</span>_v2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw"><a href="reference/naics_sankey.html">naics_sankey</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="dt">title =</span> <span class="st">"Allocating Split Categories by 1 / N"</span></a>
<a class="sourceLine" id="cb7-5" title="5">  )</a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt; Warning: Removed 24 rows containing non-finite values (stat_parallel_sets).</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt; Warning: Removed 24 rows containing non-finite values</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt; (stat_parallel_sets_axes).</span></a>
<a class="sourceLine" id="cb7-9" title="9"></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt; Warning: Removed 24 rows containing non-finite values</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt; (stat_parallel_sets_axes).</span></a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
</div>
<div id="aggregation" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregation" class="anchor"></a>Aggregation</h1>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"></a>
<a class="sourceLine" id="cb8-2" title="2">asm09_<span class="dv">2012</span>_v3 &lt;-<span class="st"> </span>asm09_<span class="dv">2012</span>_v2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(naics_<span class="dv">2012</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">vos09 =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(vos09, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(asm09_<span class="dv">2012</span>_v3<span class="op">$</span>vos09)</a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt; [1] 39364480</span></a>
<a class="sourceLine" id="cb8-8" title="8"></a>
<a class="sourceLine" id="cb8-9" title="9">asm09_<span class="dv">2012</span>_v3</a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt; # A tibble: 12 x 2</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt;    naics_2012   vos09</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt;    &lt;chr&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt;  1 311830     3157424</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt;  2 332114     5971708</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">#&gt;  3 332117     1322872</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt;  4 333314     4673039</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="co">#&gt;  5 333316     1975217</span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">#&gt;  6 333318     1659541</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="co">#&gt;  7 333511     4221870</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="co">#&gt;  8 333514     5745328</span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#&gt;  9 333515     3502270</span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co">#&gt; 10 333517     4691139</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="co">#&gt; 11 333519     2444072</span></a>
<a class="sourceLine" id="cb8-24" title="24"><span class="co">#&gt; 12 &lt;NA&gt;             0</span></a></code></pre></div>
</div>
<div id="weighting-by-data" class="section level1">
<h1 class="hasAnchor">
<a href="#weighting-by-data" class="anchor"></a>Weighting by Data</h1>
<p>A common application is to calculate weights from one dataset and apply them to another dataset, when putting them both into common NAICS classifications.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co">#ex_asm09</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">#ex_asm15</span></a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4">naics_<span class="dv">2007</span>_<span class="dv">2012</span>_datawgt &lt;-<span class="st"> </span>naics_<span class="dv">2007</span>_<span class="dv">2012</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">left_join</span>(ex_asm15, <span class="dt">by =</span> <span class="st">"naics_2012"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="co"># </span><span class="al">TODO</span><span class="co">: weighting only works for positive values?</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(vos15), vos15 <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="st">  </span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="st">  </span><span class="kw">group_by</span>(naics_<span class="dv">2007</span>, naics_<span class="dv">2012</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">vos15 =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(vos15, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="st">  </span><span class="kw">group_by</span>(naics_<span class="dv">2007</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="st">  </span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">wgt =</span> vos15 <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(vos15, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb9-15" title="15"></a>
<a class="sourceLine" id="cb9-16" title="16">naics_<span class="dv">2007</span>_<span class="dv">2012</span>_datawgt</a>
<a class="sourceLine" id="cb9-17" title="17"><span class="co">#&gt; # A tibble: 27 x 4</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="co">#&gt; # Groups:   naics_2007 [27]</span></a>
<a class="sourceLine" id="cb9-19" title="19"><span class="co">#&gt;    naics_2007 naics_2012    vos15   wgt</span></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co">#&gt;  1 311811     311811      3408901     1</span></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co">#&gt;  2 311812     311812     31802122     1</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">#&gt;  3 311813     311813      5769729     1</span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="co">#&gt;  4 311821     311821     11651966     1</span></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="co">#&gt;  5 311822     311824     13238846     1</span></a>
<a class="sourceLine" id="cb9-26" title="26"><span class="co">#&gt;  6 311823     311824     13238846     1</span></a>
<a class="sourceLine" id="cb9-27" title="27"><span class="co">#&gt;  7 311830     311830      3948833     1</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">#&gt;  8 332111     332111      8538073     1</span></a>
<a class="sourceLine" id="cb9-29" title="29"><span class="co">#&gt;  9 332112     332112      2998065     1</span></a>
<a class="sourceLine" id="cb9-30" title="30"><span class="co">#&gt; 10 332114     332114      7832447     1</span></a>
<a class="sourceLine" id="cb9-31" title="31"><span class="co">#&gt; # ... with 17 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">asm09_<span class="dv">2012</span>_v4 &lt;-<span class="st"> </span>asm09_<span class="dv">2012</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw">left_join</span>(naics_<span class="dv">2007</span>_<span class="dv">2012</span>_datawgt, </a>
<a class="sourceLine" id="cb10-3" title="3">            <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"naics_2007"</span>, <span class="st">"naics_2012"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">vos09 =</span> vos09 <span class="op">*</span><span class="st"> </span>wgt)</a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(asm09_<span class="dv">2012</span>_v4<span class="op">$</span>vos09)</a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; [1] NA</span></a>
<a class="sourceLine" id="cb10-8" title="8"></a>
<a class="sourceLine" id="cb10-9" title="9">asm09_<span class="dv">2012</span>_v4</a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">#&gt; # A tibble: 25 x 7</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">#&gt;    naics_2007 naics_label_2007        year   vos09 naics_2012   vos15   wgt</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="co">#&gt;  1 3118       Bakeries and tortilla~  2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">#&gt;  2 31181      Bread and bakery prod~  2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-15" title="15"><span class="co">#&gt;  3 31181M     Bread and bakery prod~  2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co">#&gt;  4 31182      Cookie, cracker, and ~  2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="co">#&gt;  5 31182M     Cookie, cracker, and ~  2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-18" title="18"><span class="co">#&gt;  6 31183      Tortilla manufacturing  2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-19" title="19"><span class="co">#&gt;  7 311830     Tortilla manufacturing  2009 3157424 311830     3948833     1</span></a>
<a class="sourceLine" id="cb10-20" title="20"><span class="co">#&gt;  8 33211      Forging and stamping    2009      NA &lt;NA&gt;            NA    NA</span></a>
<a class="sourceLine" id="cb10-21" title="21"><span class="co">#&gt;  9 332114     Custom roll forming     2009 5971708 332114     7832447     1</span></a>
<a class="sourceLine" id="cb10-22" title="22"><span class="co">#&gt; 10 332117     Powder metallurgy par~  2009 1322872 332117     2087871     1</span></a>
<a class="sourceLine" id="cb10-23" title="23"><span class="co">#&gt; # ... with 15 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">asm09_<span class="dv">2012</span>_v4 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">x =</span> <span class="st">"naics_2012"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> vos15, <span class="dt">fill =</span> naics_<span class="dv">2012</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="kw">geom_col</span>()</a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#&gt; Warning: Removed 12 rows containing missing values (position_stack).</span></a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="100%"></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"></a>
<a class="sourceLine" id="cb12-2" title="2">asm09_<span class="dv">2012</span>_v4 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span><span class="kw"><a href="reference/naics_sankey.html">naics_sankey</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="dt">title =</span> <span class="st">"Allocating Split Categories by Second Dataset"</span></a>
<a class="sourceLine" id="cb12-6" title="6">  )</a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">#&gt; Warning: Removed 24 rows containing non-finite values (stat_parallel_sets).</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">#&gt; Warning: Removed 24 rows containing non-finite values</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt; (stat_parallel_sets_axes).</span></a>
<a class="sourceLine" id="cb12-10" title="10"></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt; Warning: Removed 24 rows containing non-finite values</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#&gt; (stat_parallel_sets_axes).</span></a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-2.png" width="100%"></p>
<div id="application-and-check" class="section level2">
<h2 class="hasAnchor">
<a href="#application-and-check" class="anchor"></a>Application and Check</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(asm09_<span class="dv">2012</span>_v4<span class="op">$</span>vos09)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt; [1] NA</span></a></code></pre></div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/jameelalsalam/naicsmatch">https://â€‹github.com/â€‹jameelalsalam/â€‹naicsmatch</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jameelalsalam/naicsmatch/issues">https://â€‹github.com/â€‹jameelalsalam/â€‹naicsmatch/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jameel Alsalam <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jameel Alsalam.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
